<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cassette - Decentralized Music Streaming</title>
    <meta name="description"
        content="Experience music streaming on the blockchain. Artists get paid instantly, transparently, with zero intermediaries.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=button12">
    <link rel="stylesheet" href="autopay-override.css">
</head>

<body>
    <!-- Animated Background -->
    <div class="background-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Navigation Header -->
    <header class="header">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <svg width="60" height="36" viewBox="0 0 331 196" fill="none" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g filter="url(#filter0_d_28_57)">
                            <rect width="327" height="188" rx="12" fill="#361D58" />
                        </g>
                        <circle cx="19" cy="10" r="5" fill="#9C9595" />
                        <circle cx="312" cy="10" r="5" fill="#9C9595" />
                        <circle cx="19" cy="175" r="5" fill="#9C9595" />
                        <circle cx="312" cy="175" r="5" fill="#9C9595" />
                        <rect x="21" y="24" width="286" height="115" rx="12" fill="#A78BFA" />
                        <rect x="32" y="31" width="266" height="47" rx="12" fill="#F0E1D1" />
                        <line x1="79" y1="41.5" x2="280" y2="41.5" stroke="#361D58" stroke-width="3" />
                        <line x1="79" y1="64.5" x2="280" y2="64.5" stroke="#361D58" stroke-width="3" />
                        <rect x="40" y="36" width="30" height="30" rx="12" fill="#A78BFA" />
                        <path
                            d="M54.9141 44.041L50.207 57H48.2832L53.7031 42.7812H54.9434L54.9141 44.041ZM58.8594 57L54.1426 44.041L54.1133 42.7812H55.3535L60.793 57H58.8594ZM58.6152 51.7363V53.2793H50.627V51.7363H58.6152Z"
                            fill="white" />
                        <rect x="70" y="82" width="206" height="42" fill="#646060" />
                        <line x1="61.2151" y1="187.38" x2="91.5777" y2="148.921" stroke="black" stroke-width="2" />
                        <path d="M90.3705 149.02L168.157 148.06L245.944 149.05" stroke="black" stroke-width="2" />
                        <line x1="245.785" y1="148.38" x2="276.724" y2="187.57" stroke="black" stroke-width="2" />
                        <circle cx="244.5" cy="102.5" r="17" fill="black" stroke="#C3B1B1" />
                        <circle cx="94.5" cy="102.5" r="17" fill="black" stroke="#C3B1B1" />
                        <g id="Repeat group 1_inner" data-figma-trr="r6u4-0f">
                            <rect x="242.772" y="87.1114" width="3.72556" height="6.20926" fill="#C3B1B1" />
                        </g>
                        <use xlink:href="#Repeat%20group%201_inner"
                            transform="translate(211.201 -160.542) rotate(60)" />
                        <use xlink:href="#Repeat%20group%201_inner"
                            transform="translate(455.836 -57.9079) rotate(120)" />
                        <use xlink:href="#Repeat%20group%201_inner"
                            transform="translate(489.269 205.269) rotate(-180)" />
                        <use xlink:href="#Repeat%20group%201_inner"
                            transform="translate(278.068 365.811) rotate(-120)" />
                        <use xlink:href="#Repeat%20group%201_inner"
                            transform="translate(33.4332 263.177) rotate(-60)" />
                        <g id="Repeat group 2_inner" data-figma-trr="r6u4-0f">
                            <rect x="92.7717" y="87.1114" width="3.72556" height="6.20926" fill="#C3B1B1" />
                        </g>
                        <use xlink:href="#Repeat%20group%202_inner"
                            transform="translate(136.201 -30.6386) rotate(60)" />
                        <use xlink:href="#Repeat%20group%202_inner"
                            transform="translate(230.836 71.9959) rotate(120)" />
                        <use xlink:href="#Repeat%20group%202_inner"
                            transform="translate(189.269 205.269) rotate(-180)" />
                        <use xlink:href="#Repeat%20group%202_inner"
                            transform="translate(53.0677 235.908) rotate(-120)" />
                        <use xlink:href="#Repeat%20group%202_inner"
                            transform="translate(-41.5668 133.273) rotate(-60)" />
                        <rect x="120" y="88" width="97" height="30" fill="#FF0080" />
                        <line x1="120" y1="102.75" x2="217" y2="102.75" stroke="white" stroke-width="0.5" />
                        <path
                            d="M166 88C175.763 88 181.237 88 191 88C183.513 100.801 182.967 107.449 191 118H166C174.067 106.285 173.752 99.7153 166 88Z"
                            fill="white" fill-opacity="0.5" />
                        <circle cx="96" cy="175" r="5" fill="black" />
                        <circle cx="243" cy="175" r="5" fill="black" />
                        <line x1="129.5" y1="96" x2="129.5" y2="109" stroke="white" />
                        <line x1="208.5" y1="96" x2="208.5" y2="109" stroke="white" />
                        <line x1="195.5" y1="96" x2="195.5" y2="109" stroke="white" />
                        <line x1="180.5" y1="96" x2="180.5" y2="109" stroke="white" />
                        <line x1="169.5" y1="96" x2="169.5" y2="109" stroke="white" />
                        <line x1="156.5" y1="96" x2="156.5" y2="109" stroke="white" />
                        <line x1="143.5" y1="96" x2="143.5" y2="109" stroke="white" />
                        <rect x="116" y="155" width="10" height="10" fill="black" />
                        <rect x="207" y="155" width="10" height="10" fill="black" />
                        <path
                            d="M217 118C212.243 115.157 209 109.507 209 103.001C209 96.4943 212.243 90.8442 217 88.001V118Z"
                            fill="white" fill-opacity="0.5" />
                        <path
                            d="M120 88C124.804 91.1239 128 96.6743 128 103.001C128 109.327 124.804 114.876 120 118V88Z"
                            fill="white" fill-opacity="0.5" />
                        <path
                            d="M18.4773 12.4034V6.77841H19.4318V12.4034H18.4773ZM16.142 10.0682V9.11364H21.767V10.0682H16.142Z"
                            fill="black" />
                        <path
                            d="M18.4773 178.403V172.778H19.4318V178.403H18.4773ZM16.142 176.068V175.114H21.767V176.068H16.142Z"
                            fill="black" />
                        <path
                            d="M311.477 178.403V172.778H312.432V178.403H311.477ZM309.142 176.068V175.114H314.767V176.068H309.142Z"
                            fill="black" />
                        <path
                            d="M311.477 13.4034V7.77841H312.432V13.4034H311.477ZM309.142 11.0682V10.1136H314.767V11.0682H309.142Z"
                            fill="black" />
                        <defs>
                            <filter id="filter0_d_28_57" x="0" y="0" width="331" height="196"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                <feColorMatrix in="SourceAlpha" type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <feOffset dx="4" dy="8" />
                                <feComposite in2="hardAlpha" operator="out" />
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_28_57" />
                                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_28_57"
                                    result="shape" />
                            </filter>
                        </defs>
                    </svg>
                    <span class="logo-text">Cassette</span>
                </div>

                <nav class="nav-menu">
                    <a href="#" class="nav-link active">Explore</a>
                    <a href="#" class="nav-link">Artists</a>
                    <a href="#" class="nav-link">How It Works</a>
                    <a href="#" class="nav-link" id="historyBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem;">
                            <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                        </svg>
                        History
                    </a>
                    <a href="#" class="nav-link" id="favoritesBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem;">
                            <path
                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Favorites
                    </a>
                    <a href="#" class="nav-link" id="libraryBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem;">
                            <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                            <rect x="7" y="4" width="10" height="16" rx="1" stroke="currentColor" stroke-width="2"
                                fill="none" />
                        </svg>
                        Your Library
                    </a>
                </nav>

                <div class="wallet-section">
                    <!-- Auto-Pay Button -->
                    <button id="autoPayBtn" class="auto-pay-btn active">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="lock-icon">
                            <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2" />
                            <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" class="lock-open" />
                            <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" class="lock-closed" style="display: none;" />
                        </svg>
                        <span class="auto-pay-text">Auto-Pay: ON</span>
                    </button>

                    <div id="walletInfo" class="wallet-info hidden">
                        <div class="balance-display">
                            <span class="balance-label">Balance:</span>
                            <span id="userBalance" class="balance-amount">0.0000</span>
                            <span class="balance-currency">ETH</span>
                        </div>
                        <div class="wallet-address" id="walletAddress">0x0000...0000</div>
                    </div>
                    <button id="connectWalletBtn" class="btn-primary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M17.5 6.25H15V5C15 3.61929 13.8807 2.5 12.5 2.5H5C3.61929 2.5 2.5 3.61929 2.5 5V15C2.5 16.3807 3.61929 17.5 5 17.5H17.5C18.1904 17.5 18.75 16.9404 18.75 16.25V7.5C18.75 6.80964 18.1904 6.25 17.5 6.25Z"
                                stroke="currentColor" stroke-width="1.5" />
                            <circle cx="14" cy="11.875" r="1.25" fill="currentColor" />
                        </svg>
                        <span id="connectWalletText">Connect Wallet</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">
                    Music Streaming
                    <span class="gradient-text">Reimagined</span>
                </h1>
                <p class="hero-subtitle">
                    Every Play Pays.
                </p>
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">To Artists</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">Intermediaries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">Instant</div>
                        <div class="stat-label">Payments</div>
                    </div>
                </div>
            </section>

            <!-- Filter Section -->
            <section class="filter-section">
                <div class="section-header">
                    <h2 class="section-title">Discover Music</h2>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <rect x="2" y="2" width="7" height="7" rx="1" stroke="currentColor"
                                    stroke-width="1.5" />
                                <rect x="11" y="2" width="7" height="7" rx="1" stroke="currentColor"
                                    stroke-width="1.5" />
                                <rect x="2" y="11" width="7" height="7" rx="1" stroke="currentColor"
                                    stroke-width="1.5" />
                                <rect x="11" y="11" width="7" height="7" rx="1" stroke="currentColor"
                                    stroke-width="1.5" />
                            </svg>
                        </button>
                        <button class="view-btn" data-view="list">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <rect x="2" y="4" width="16" height="2" rx="1" fill="currentColor" />
                                <rect x="2" y="9" width="16" height="2" rx="1" fill="currentColor" />
                                <rect x="2" y="14" width="16" height="2" rx="1" fill="currentColor" />
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Songs Grid -->
            <section class="songs-section">
                <div id="songsGrid" class="songs-grid">
                    <!-- Songs will be dynamically loaded here -->
                </div>
            </section>
        </div>
    </main>

    <!-- Audio Player -->
    <div id="audioPlayer" class="audio-player hidden">
        <div class="player-content">
            <div class="player-left">
                <img id="playerCover" class="player-cover" src="" alt="Album Cover">
                <div class="player-info">
                    <div id="playerTitle" class="player-title">Song Title</div>
                    <div id="playerArtist" class="player-artist">Artist Name</div>
                </div>
            </div>

            <div class="player-center">
                <div class="player-controls">
                    <button class="control-btn" id="prevBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M19 20L9 12L19 4V20Z" fill="currentColor" />
                            <path d="M5 19V5" stroke="currentColor" stroke-width="2" />
                        </svg>
                    </button>
                    <button class="control-btn control-btn-play" id="playPauseBtn">
                        <svg id="playIcon" width="28" height="28" viewBox="0 0 24 24" fill="none">
                            <path d="M8 5V19L19 12L8 5Z" fill="currentColor" />
                        </svg>
                        <svg id="pauseIcon" class="hidden" width="28" height="28" viewBox="0 0 24 24" fill="none">
                            <rect x="6" y="4" width="4" height="16" rx="1" fill="currentColor" />
                            <rect x="14" y="4" width="4" height="16" rx="1" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="control-btn" id="nextBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M5 4L15 12L5 20V4Z" fill="currentColor" />
                            <path d="M19 5V19" stroke="currentColor" stroke-width="2" />
                        </svg>
                    </button>
                </div>
                <div class="player-progress">
                    <span id="currentTime" class="time-label">0:00</span>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                        <input type="range" id="progressSlider" class="progress-slider" min="0" max="100" value="0">
                    </div>
                    <span id="duration" class="time-label">0:00</span>
                </div>
            </div>

            <div class="player-right">
                <button class="control-btn" id="volumeBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M11 5L6 9H2V15H6L11 19V5Z" stroke="currentColor" stroke-width="2" />
                        <path
                            d="M15.54 8.46C16.4774 9.39764 17.0039 10.6692 17.0039 11.995C17.0039 13.3208 16.4774 14.5924 15.54 15.53"
                            stroke="currentColor" stroke-width="2" />
                    </svg>
                </button>
                <div class="volume-slider">
                    <input type="range" id="volumeControl" min="0" max="100" value="70">
                </div>
            </div>
        </div>
        <audio id="audioElement"></audio>
    </div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-icon">
                <svg class="spinner" width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" stroke="url(#spinner-gradient)" stroke-width="4" fill="none"
                        stroke-linecap="round" />
                    <defs>
                        <linearGradient id="spinner-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#667eea" />
                            <stop offset="100%" stop-color="#764ba2" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <h3 class="modal-title">Processing Payment</h3>
            <p class="modal-message">Confirming transaction on blockchain...</p>
            <div class="modal-details">
                <div class="detail-row">
                    <span class="detail-label">Song:</span>
                    <span id="txSongName" class="detail-value">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Amount:</span>
                    <span id="txAmount" class="detail-value">-</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-icon success">
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" stroke="#10b981" stroke-width="4" fill="none" />
                    <path d="M20 30L26 36L40 22" stroke="#10b981" stroke-width="4" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
            <h3 class="modal-title">Payment Successful!</h3>
            <p class="modal-message">Now playing your song...</p>
            <button class="btn-primary" onclick="closeSuccessModal()">Continue</button>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-icon error">
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="25" stroke="#ef4444" stroke-width="4" fill="none" />
                    <path d="M22 22L38 38M38 22L22 38" stroke="#ef4444" stroke-width="4" stroke-linecap="round" />
                </svg>
            </div>
            <h3 class="modal-title">Transaction Failed</h3>
            <p id="errorMessage" class="modal-message">Something went wrong. Please try again.</p>
            <button class="btn-primary" onclick="closeErrorModal()">Close</button>
        </div>
    </div>

    <!-- Listening History Modal -->
    <div id="historyModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeHistoryModal()"></div>
        <div class="modal-content history-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                        style="margin-right: 0.5rem; vertical-align: middle;">
                        <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                    </svg>
                    Listening History
                </h3>
                <button class="close-btn" onclick="closeHistoryModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>

            <!-- Summary Cards -->
            <div class="history-summary">
                <div class="summary-card">
                    <div class="summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M8 5V19L19 12L8 5Z" fill="currentColor" />
                        </svg>
                    </div>
                    <div class="summary-info">
                        <div class="summary-value" id="totalPlays">0</div>
                        <div class="summary-label">Songs Played</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path
                                d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"
                                fill="currentColor" />
                        </svg>
                    </div>
                    <div class="summary-info">
                        <div class="summary-value" id="totalSpent">0.0000</div>
                        <div class="summary-label">ETH Spent</div>
                    </div>
                </div>
            </div>

            <!-- History List -->
            <div class="history-list-container">
                <div class="history-list-header">
                    <h4>Recent Activity</h4>
                    <button class="btn-clear" id="clearHistoryBtn" onclick="clearHistory()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        Clear History
                    </button>
                </div>
                <div id="historyList" class="history-list">
                    <!-- History items will be dynamically inserted here -->
                    <div class="empty-history">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                            <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <p>No listening history yet</p>
                        <span>Start playing songs to see your history here</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div id="favoritesModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeFavoritesModal()"></div>
        <div class="modal-content history-modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                        style="margin-right: 0.5rem; vertical-align: middle;">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    My Favorites
                </h3>
                <button class="close-btn" onclick="closeFavoritesModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
            </div>

            <!-- Summary Card -->
            <div class="history-summary">
                <div class="summary-card favorites-summary">
                    <div class="summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path
                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                                fill="currentColor" />
                        </svg>
                    </div>
                    <div class="summary-info">
                        <div class="summary-value" id="totalFavorites">0</div>
                        <div class="summary-label">Favorite Songs</div>
                    </div>
                </div>
            </div>

            <!-- Favorites Grid -->
            <div class="history-list-container">
                <div class="history-list-header">
                    <h4>Your Favorite Songs</h4>
                    <button class="btn-clear" id="clearFavoritesBtn" onclick="clearAllFavorites()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        Clear All
                    </button>
                </div>
                <div id="favoritesList" class="favorites-grid">
                    <!-- Favorite songs will be dynamically inserted here -->
                    <div class="empty-history">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                            <path
                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <p>No favorite songs yet</p>
                        <span>Click the heart icon on songs to add them to your favorites</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Your Library Modal -->
    <div id="libraryModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeLibraryModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="margin-right: 0.75rem;">
                        <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                        <rect x="7" y="4" width="10" height="16" rx="1" stroke="currentColor" stroke-width="2"
                            fill="none" />
                    </svg>
                    Your Library
                </h2>
                <button class="modal-close" onclick="closeLibraryModal()">×</button>
            </div>

            <!-- Library Tabs -->
            <div class="library-tabs">
                <button class="library-tab active" onclick="switchLibraryTab('playlists')">Playlists</button>
                <button class="library-tab" onclick="switchLibraryTab('add-to-playlist')">Add to Playlist</button>
            </div>

            <!-- Playlists View -->
            <div id="playlistsView" class="library-view">
                <div class="library-actions">
                    <button class="btn-create-playlist" onclick="showCreatePlaylistForm()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        Create Playlist
                    </button>
                </div>

                <!-- Create Playlist Form -->
                <div id="createPlaylistForm" class="create-playlist-form hidden">
                    <input type="text" id="playlistNameInput" placeholder="Playlist name" class="playlist-input" />
                    <div class="form-actions">
                        <button class="btn-secondary" onclick="hideCreatePlaylistForm()">Cancel</button>
                        <button class="btn-primary" onclick="createPlaylist()">Create</button>
                    </div>
                </div>

                <!-- Playlists Grid -->
                <div id="playlistsGrid" class="playlists-grid">
                    <!-- Playlists will be dynamically inserted here -->
                </div>
            </div>

            <!-- Add to Playlist View -->
            <div id="addToPlaylistView" class="library-view hidden">
                <div class="add-to-playlist-container">
                    <p class="instruction-text">Select a song and choose a playlist to add it to</p>

                    <!-- Song Selection -->
                    <div class="song-selection">
                        <h4>Select Song</h4>
                        <div id="songSelectionList" class="song-list-compact">
                            <!-- Songs will be listed here -->
                        </div>
                    </div>

                    <!-- Playlist Selection -->
                    <div class="playlist-selection hidden" id="playlistSelectionSection">
                        <h4>Add to Playlist</h4>
                        <div id="playlistSelectionList" class="playlist-list-compact">
                            <!-- Playlists will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Confirmation Modal -->
    <div id="passwordModal" class="modal hidden">
        <div class="modal-overlay" onclick="closePasswordModal()"></div>
        <div class="modal-content password-modal-content">
            <div class="modal-header">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="margin-right: 0.75rem;">
                        <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2" />
                        <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                    Confirm Transaction
                </h2>
                <button class="modal-close" onclick="closePasswordModal()">×</button>
            </div>

            <div class="password-modal-body">
                <div class="transaction-info">
                    <p class="info-label">Song:</p>
                    <p class="info-value" id="passwordSongTitle">-</p>

                    <p class="info-label">Artist:</p>
                    <p class="info-value" id="passwordSongArtist">-</p>

                    <p class="info-label">Price:</p>
                    <p class="info-value" id="passwordSongPrice">-</p>
                </div>

                <div class="password-input-container">
                    <label for="transactionPassword">Enter Password to Confirm</label>
                    <input type="password" id="transactionPassword" class="password-input"
                        placeholder="Enter your password" autocomplete="off" />
                    <p class="password-hint">Default password: <code>1234</code></p>
                </div>

                <div class="password-actions">
                    <button class="btn-secondary" onclick="closePasswordModal()">Cancel</button>
                    <button class="btn-primary" onclick="confirmPasswordAndPay()">Confirm & Pay</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Core Ethereum Library -->
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="app.js"></script>
    <script src="toggle-fix.js"></script>
</body>

</html>